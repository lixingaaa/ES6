<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script>
    /**
     * 基本概念
     * 异步: 一个任务不是连续完成的，任务被人为分成两段，先执行第一段，然后转而执行其他任务，等做好了准备，再回过头执行第二段。
     *      相应地，连续的执行就叫做同步。由于是连续执行，不能插入其他任务，所以操作系统从硬盘读取文件的这段时间，程序只能干等着。
     * 回调函数: JavaScript 语言对异步编程的实现，就是回调函数。所谓回调函数，就是把任务的第二段单独写在一个函数里面，等到重新执行这个任务的时候，就直接调用这个函数。
     * Promise允许将回调函数的嵌套，改成链式调用。采用 Promise，连续读取多个文件.
     * **/
    {
      // 回调函数
      // readFile函数的第三个参数，就是回调函数，也就是任务的第二段。等到操作系统返回了/etc/passwd这个文件以后，回调函数才会执行。
      // fs.readFile('/etc/passwd', 'utf-8', function (err, data) {
      //   if (err) throw err;
      //   console.log(data);
      // });

      // Promise
      // Promise 提供then方法加载回调函数，catch方法捕捉执行过程中抛出的错误。
      // Promise 的最大问题是代码冗余，原来的任务被 Promise 包装了一下，不管什么操作，一眼看去都是一堆then，原来的语义变得很不清楚。
      // var readFile = require('fs-readfile-promise');

      // readFile(fileA)
      //   .then(function (data) {
      //     console.log(data.toString());
      //   })
      //   .then(function () {
      //     return readFile(fileB);
      //   })
      //   .then(function (data) {
      //     console.log(data.toString());
      //   })
      //   .catch(function (err) {
      //     console.log(err);
      //   });
    }
  </script>
</body>

</html>